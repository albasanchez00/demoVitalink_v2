<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Configuraci√≥n</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" th:href="@{/media/favicon_IA_Medica.ico}" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/css/style2.css}">
    <link rel="stylesheet" th:href="@{/css/admin-config.css}">
</head>
<body>
<section class="contenedor">
    <div th:replace="~{fragments/header :: header}"></div>

    <section id="admin-config" class="section-config">
        <header class="config__head">
            <h2>Configuraciones Generales</h2>
            <div class="config__actions">
                <a id="btnVolver" class="btn btn--primary" th:href="@{/usuarios/panelUsuario}">‚¨Ö Volver</a>
                <button id="btnGuardar" class="btn btn--primary" disabled>Guardar cambios</button>
                <button id="btnRevertir" class="btn btn--muted" disabled>Revertir</button>
                <span id="dirtyBadge" class="pill pill--warn" style="display:none">Sin guardar</span>
            </div>
        </header>

        <!-- Tabs -->
        <nav class="tabs" role="tablist" aria-label="Config Admin">
            <button role="tab" aria-selected="true" aria-controls="tab-identidad" id="tab-identidad-btn">Identidad</button>
            <button role="tab" aria-selected="false" aria-controls="tab-centro" id="tab-centro-btn">Centro & TZ</button>
            <button role="tab" aria-selected="false" aria-controls="tab-legales" id="tab-legales-btn">Legales</button>
            <button role="tab" aria-selected="false" aria-controls="tab-notifs" id="tab-notifs-btn">Notificaciones</button>
            <button role="tab" aria-selected="false" aria-controls="tab-seguridad" id="tab-seguridad-btn">Seguridad</button>
            <button role="tab" aria-selected="false" aria-controls="tab-citas" id="tab-citas-btn">Citas</button>
            <button role="tab" aria-selected="false" aria-controls="tab-integraciones" id="tab-integraciones-btn">Integraciones</button>
            <!-- Nuevas pesta√±as -->
            <button role="tab" aria-selected="false" aria-controls="tab-usuarios" id="tab-usuarios-btn">Usuarios</button>
            <button role="tab" aria-selected="false" aria-controls="tab-auditoria" id="tab-auditoria-btn">Auditor√≠a</button>
            <button role="tab" aria-selected="false" aria-controls="tab-backup" id="tab-backup-btn">Backup</button>
            <button role="tab" aria-selected="false" aria-controls="tab-ui" id="tab-ui-btn">Personalizaci√≥n</button>
            <button role="tab" aria-selected="false" aria-controls="tab-limites" id="tab-limites-btn">L√≠mites</button>
            <button role="tab" aria-selected="false" aria-controls="tab-mantenimiento" id="tab-mantenimiento-btn">Mantenimiento</button>
            <button role="tab" aria-selected="false" aria-controls="tab-api" id="tab-api-btn">API & Webhooks</button>
        </nav>

        <!-- Panels -->
        <div class="tab-panels">

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- IDENTIDAD -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-identidad" role="tabpanel" aria-labelledby="tab-identidad-btn">
                <div class="form-grid">
                    <label>Nombre del sistema
                        <input id="cfg_nombreSistema" type="text" placeholder="VitaLink" autocomplete="off">
                    </label>
                    <label>URL logo (cabecera)
                        <input id="cfg_logoUrl" type="url" placeholder="https://.../logo.svg" autocomplete="off">
                    </label>
                    <label>Color primario
                        <input id="cfg_colorPrimario" type="color" value="#1b5bff" aria-label="Color primario">
                    </label>
                    <label>Color secundario
                        <input id="cfg_colorSecundario" type="color" value="#00b894" aria-label="Color secundario">
                    </label>
                    <div class="preview">
                        <small>Previsualizaci√≥n logo/icono</small>
                        <div id="brandPreview" class="brand-preview">
                            <picture class="contPreviewImg">
                                <img id="brandPreviewImg" class="brandPreviewImg" src="/media/logo_IA_Medica.svg" alt="Logo">
                            </picture>
                            <span id="brandPreviewName">VitaLink</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- CENTRO & TZ -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-centro" role="tabpanel" hidden aria-labelledby="tab-centro-btn">
                <div class="form-grid">
                    <label>Nombre del centro
                        <input id="cfg_centroNombre" type="text" placeholder="Hospital General" autocomplete="off">
                    </label>
                    <label>Ciudad
                        <input id="cfg_centroCiudad" type="text" placeholder="Madrid" autocomplete="off">
                    </label>
                    <label>Zona horaria (IANA)
                        <input id="cfg_timezone" type="text" placeholder="Europe/Madrid" autocomplete="off">
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- LEGALES -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-legales" role="tabpanel" hidden aria-labelledby="tab-legales-btn">
                <div class="form-grid">
                    <label>URL Pol√≠tica de Privacidad
                        <input id="cfg_privacidadUrl" type="url" placeholder="/politicasPrivacidad">
                    </label>
                    <label>URL T√©rminos y Condiciones
                        <input id="cfg_terminosUrl" type="url" placeholder="/terminosCondiciones">
                    </label>
                    <label>URL Pol√≠tica de Cookies
                        <input id="cfg_cookiesUrl" type="url" placeholder="/politicaCookies">
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- NOTIFICACIONES -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-notifs" role="tabpanel" hidden aria-labelledby="tab-notifs-btn">
                <div class="form-grid">
                    <label>Email remitente (from)
                        <input id="cfg_mailFrom" type="email" placeholder="no-reply@tudominio.com" autocomplete="off">
                    </label>
                    <label class="switch">
                        <input id="cfg_notifCitas" type="checkbox">
                        <span>Recordatorios de citas</span>
                    </label>
                    <label class="switch">
                        <input id="cfg_notifMedicacion" type="checkbox">
                        <span>Recordatorios de medicaci√≥n</span>
                    </label>
                    <label class="switch">
                        <input id="cfg_notifSintomas" type="checkbox">
                        <span>Recordatorios de registro de s√≠ntomas</span>
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- SEGURIDAD -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-seguridad" role="tabpanel" hidden aria-labelledby="tab-seguridad-btn">
                <div class="form-grid">
                    <label>Longitud m√≠nima contrase√±a
                        <input id="cfg_pwdMinLen" type="number" min="6" max="128" value="10" inputmode="numeric">
                    </label>
                    <label>D√≠as caducidad contrase√±a
                        <input id="cfg_pwdExpireDays" type="number" min="0" value="0" inputmode="numeric">
                        <small class="help">0 = sin caducidad</small>
                    </label>
                    <label class="switch">
                        <input id="cfg_2faEnabled" type="checkbox">
                        <span>Habilitar 2FA obligatorio</span>
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- CITAS -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-citas" role="tabpanel" hidden aria-labelledby="tab-citas-btn">
                <div class="form-grid">
                    <label>Duraci√≥n por defecto (min)
                        <input id="cfg_citaDuracion" type="number" min="5" step="5" value="30" inputmode="numeric">
                    </label>
                    <label>Horario laboral inicio
                        <input id="cfg_horarioInicio" type="time" value="08:00">
                    </label>
                    <label>Horario laboral fin
                        <input id="cfg_horarioFin" type="time" value="17:00">
                    </label>
                    <label>D√≠as no laborables (CSV)
                        <input id="cfg_diasNoLaborables" type="text" placeholder="2025-12-25,2026-01-01" autocomplete="off">
                        <small class="help">Formato: YYYY-MM-DD separados por coma</small>
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- INTEGRACIONES SMTP -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-integraciones" role="tabpanel" hidden aria-labelledby="tab-integraciones-btn">
                <div class="form-grid">
                    <label>SMTP host
                        <input id="cfg_smtpHost" type="text" placeholder="smtp.mailserver.com" autocomplete="off">
                    </label>
                    <label>SMTP puerto
                        <input id="cfg_smtpPort" type="number" min="1" max="65535" value="587" inputmode="numeric">
                    </label>
                    <label>SMTP usuario
                        <input id="cfg_smtpUser" type="text" placeholder="apikey / usuario" autocomplete="off">
                    </label>
                    <small class="muted col-span-2">* La contrase√±a SMTP no se gestiona en cliente. A√±√°dela como secreto en servidor.</small>
                    <label>Webhook Base URL
                        <input id="cfg_webhookBase" type="url" placeholder="https://api.tudominio.com/hooks/">
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- USUARIOS (NUEVO) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-usuarios" role="tabpanel" hidden aria-labelledby="tab-usuarios-btn">
                <div class="form-grid">
                    <label>M√°ximo usuarios en sistema
                        <input id="cfg_maxUsuariosSistema" type="number" min="0" value="0" inputmode="numeric">
                        <small class="help">0 = sin l√≠mite</small>
                    </label>
                    <label>M√°ximo m√©dicos en sistema
                        <input id="cfg_maxMedicosSistema" type="number" min="0" value="0" inputmode="numeric">
                        <small class="help">0 = sin l√≠mite</small>
                    </label>
                    <label class="switch">
                        <input id="cfg_registroAbierto" type="checkbox">
                        <span>üåê Registro abierto al p√∫blico</span>
                    </label>
                    <label class="switch">
                        <input id="cfg_requiereAprobacion" type="checkbox">
                        <span>‚úÖ Nuevos usuarios requieren aprobaci√≥n</span>
                    </label>
                    <label class="col-span-2">Roles disponibles (CSV)
                        <input id="cfg_rolesDisponibles" type="text" placeholder="ADMIN,MEDICO,USUARIO" autocomplete="off">
                        <small class="help">Roles que se pueden asignar a usuarios</small>
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- AUDITOR√çA / LOGS (NUEVO) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-auditoria" role="tabpanel" hidden aria-labelledby="tab-auditoria-btn">
                <div class="form-grid">
                    <label>Nivel de auditor√≠a
                        <select id="cfg_nivelAuditoria">
                            <option value="NINGUNO">üîï Ninguno</option>
                            <option value="BASICO">üìã B√°sico</option>
                            <option value="COMPLETO">üìä Completo</option>
                        </select>
                    </label>
                    <label>Retenci√≥n de logs (d√≠as)
                        <input id="cfg_retencionLogsDias" type="number" min="1" max="3650" value="90" inputmode="numeric">
                    </label>
                    <fieldset>
                        <legend>üìù Eventos a auditar</legend>
                        <label class="switch">
                            <input id="cfg_auditarAccesos" type="checkbox">
                            <span>Accesos (login/logout)</span>
                        </label>
                        <label class="switch">
                            <input id="cfg_auditarCambios" type="checkbox">
                            <span>Cambios en datos</span>
                        </label>
                        <label class="switch">
                            <input id="cfg_auditarErrores" type="checkbox">
                            <span>Errores del sistema</span>
                        </label>
                    </fieldset>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- BACKUP (NUEVO) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-backup" role="tabpanel" hidden aria-labelledby="tab-backup-btn">
                <div class="form-grid">
                    <label class="switch col-span-2">
                        <input id="cfg_backupAutomatico" type="checkbox">
                        <span>üíæ Backup autom√°tico habilitado</span>
                    </label>
                    <label>Frecuencia
                        <select id="cfg_backupFrecuencia">
                            <option value="DIARIO">üìÖ Diario</option>
                            <option value="SEMANAL">üìÜ Semanal</option>
                            <option value="MENSUAL">üóìÔ∏è Mensual</option>
                        </select>
                    </label>
                    <label>Hora de ejecuci√≥n
                        <input id="cfg_backupHora" type="time" value="03:00">
                        <small class="help">Hora local del servidor</small>
                    </label>
                    <label>Retenci√≥n (d√≠as)
                        <input id="cfg_backupRetencionDias" type="number" min="1" max="365" value="30" inputmode="numeric">
                    </label>
                    <label>Destino
                        <select id="cfg_backupDestino">
                            <option value="LOCAL">üñ•Ô∏è Local (servidor)</option>
                            <option value="S3">‚òÅÔ∏è Amazon S3</option>
                            <option value="GCS">‚òÅÔ∏è Google Cloud Storage</option>
                        </select>
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- PERSONALIZACI√ìN UI (NUEVO) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-ui" role="tabpanel" hidden aria-labelledby="tab-ui-btn">
                <div class="form-grid">
                    <label>Fuente principal
                        <select id="cfg_fuentePrincipal">
                            <option value="Inter">Inter</option>
                            <option value="Roboto">Roboto</option>
                            <option value="Open Sans">Open Sans</option>
                            <option value="Lato">Lato</option>
                            <option value="Poppins">Poppins</option>
                            <option value="system-ui">Sistema</option>
                        </select>
                    </label>
                    <label>Tama√±o fuente base (px)
                        <input id="cfg_tamanoFuenteBase" type="number" min="12" max="24" value="16" inputmode="numeric">
                    </label>
                    <label>Densidad de interfaz
                        <select id="cfg_densidadUI">
                            <option value="COMPACTA">üìê Compacta</option>
                            <option value="NORMAL">üìè Normal</option>
                            <option value="ESPACIOSA">üìñ Espaciosa</option>
                        </select>
                    </label>
                    <label class="switch">
                        <input id="cfg_mostrarAyuda" type="checkbox">
                        <span>üí° Mostrar tooltips de ayuda</span>
                    </label>
                    <label class="switch">
                        <input id="cfg_animacionesUI" type="checkbox">
                        <span>‚ú® Habilitar animaciones</span>
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- L√çMITES / CUOTAS (NUEVO) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-limites" role="tabpanel" hidden aria-labelledby="tab-limites-btn">
                <div class="form-grid">
                    <label>üë• M√°x. pacientes por m√©dico
                        <input id="cfg_maxPacientesPorMedico" type="number" min="0" value="0" inputmode="numeric">
                        <small class="help">0 = sin l√≠mite</small>
                    </label>
                    <label>üìÖ M√°x. citas diarias (global)
                        <input id="cfg_maxCitasDiarias" type="number" min="0" value="0" inputmode="numeric">
                        <small class="help">0 = sin l√≠mite</small>
                    </label>
                    <label>üíæ Almacenamiento m√°ximo (MB)
                        <input id="cfg_maxAlmacenamientoMB" type="number" min="100" value="1024" inputmode="numeric">
                    </label>
                    <label>üìÑ Tama√±o m√°ximo archivo (MB)
                        <input id="cfg_maxArchivoMB" type="number" min="1" max="100" value="10" inputmode="numeric">
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- MANTENIMIENTO (NUEVO) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-mantenimiento" role="tabpanel" hidden aria-labelledby="tab-mantenimiento-btn">
                <div class="form-grid">
                    <label class="switch col-span-2">
                        <input id="cfg_modoMantenimiento" type="checkbox">
                        <span>üöß <strong>Activar modo mantenimiento</strong></span>
                    </label>
                    <small class="help col-span-2" style="margin-top:-12px; color:#dc2626;">‚ö†Ô∏è Los usuarios no podr√°n acceder al sistema mientras est√© activo</small>

                    <label class="col-span-2">Mensaje de mantenimiento
                        <textarea id="cfg_mensajeMantenimiento" rows="3" placeholder="El sistema est√° en mantenimiento programado. Volvemos pronto."></textarea>
                    </label>
                    <label>Mantenimiento programado
                        <input id="cfg_mantenimientoProgramado" type="datetime-local">
                        <small class="help">Fecha/hora de pr√≥ximo mantenimiento</small>
                    </label>
                    <label>IPs blanqueadas (CSV)
                        <input id="cfg_ipsBlanqueadas" type="text" placeholder="192.168.1.1,10.0.0.1" autocomplete="off">
                        <small class="help">IPs que pueden acceder durante mantenimiento</small>
                    </label>
                </div>
            </section>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- API & WEBHOOKS (NUEVO) -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <section id="tab-api" role="tabpanel" hidden aria-labelledby="tab-api-btn">
                <div class="form-grid">
                    <fieldset>
                        <legend>üîå API REST</legend>
                        <label class="switch">
                            <input id="cfg_apiHabilitada" type="checkbox">
                            <span>API habilitada</span>
                        </label>
                        <label>Rate limit (peticiones/hora)
                            <input id="cfg_apiRateLimitReq" type="number" min="1" value="1000" inputmode="numeric">
                        </label>
                        <label>Expiraci√≥n tokens (d√≠as)
                            <input id="cfg_apiTokenExpiraDias" type="number" min="1" max="3650" value="365" inputmode="numeric">
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>üîó Webhooks</legend>
                        <label class="switch">
                            <input id="cfg_webhooksHabilitados" type="checkbox">
                            <span>Webhooks habilitados</span>
                        </label>
                        <label>Secret key
                            <input id="cfg_webhookSecretKey" type="password" placeholder="clave secreta para firmar webhooks" autocomplete="off">
                            <small class="help">Se usa para verificar la autenticidad</small>
                        </label>
                        <label class="col-span-2">Eventos a notificar (CSV)
                            <input id="cfg_webhookEventos" type="text" placeholder="CITA_CREADA,CITA_CANCELADA,USUARIO_REGISTRADO" autocomplete="off">
                            <small class="help">Eventos que disparar√°n webhooks</small>
                        </label>
                    </fieldset>
                </div>
            </section>

        </div>
    </section>

    <div th:replace="~{fragments/footer :: footer}"></div>
</section>
<script th:src="@{/js/admin-config.js}"></script>
</body>
</html>