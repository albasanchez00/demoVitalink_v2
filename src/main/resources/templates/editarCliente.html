<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Editar cliente</title>
    <link rel="shortcut icon" th:href="@{/media/favicon_IA_Medica.ico}" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/css/style2.css}">
</head>
<body>
<div th:replace="fragments/header :: header"></div>

<main id="main-editar-cliente">
    <div class="editar-wrap">
        <!-- Header -->
        <div class="editar-header">
            <h1>üìã Editar Paciente</h1>
            <a th:href="@{/medico/pacientes}" class="btn-volver">
                ‚Üê Volver al listado
            </a>
        </div>

        <!-- Body -->
        <div class="editar-body">
            <!-- Info badge -->
            <div class="info-badge">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Actualiza la informaci√≥n del paciente y su m√©dico de referencia
            </div>

            <!-- Formulario -->
            <form th:action="@{/clientes/actualizar}" th:object="${cliente}" method="post">
                <!-- CSRF -->
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <!-- ID del cliente -->
                <input type="hidden" th:field="*{idCliente}"/>

                <!-- Secci√≥n: Datos Personales -->
                <div class="form-section">
                    <div class="form-section-title">Datos Personales</div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>
                                Nombre <span class="required">*</span>
                            </label>
                            <input type="text"
                                   th:field="*{nombre}"
                                   placeholder="Ej: Juan"
                                   required>
                        </div>

                        <div class="form-group">
                            <label>Apellidos</label>
                            <input type="text"
                                   th:field="*{apellidos}"
                                   placeholder="Ej: Garc√≠a P√©rez">
                        </div>
                    </div>
                </div>

                <!-- Secci√≥n: Contacto -->
                <div class="form-section">
                    <div class="form-section-title">Informaci√≥n de Contacto</div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>Correo Electr√≥nico</label>
                            <input type="email"
                                   th:field="*{correoElectronico}"
                                   placeholder="ejemplo@correo.com">
                        </div>

                        <div class="form-group">
                            <label>Tel√©fono</label>
                            <input type="text"
                                   th:field="*{telefono}"
                                   placeholder="+34 600 000 000">
                        </div>
                    </div>
                </div>

                <!-- Secci√≥n: Asignaci√≥n M√©dica -->
                <div class="form-section">
                    <div class="form-section-title">Asignaci√≥n M√©dica</div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>M√©dico de Referencia</label>
                            <select name="medicoId">
                                <option value="">-- Sin m√©dico asignado --</option>
                                <option th:each="m : ${medicos}"
                                        th:value="${m.id_usuario}"
                                        th:text="${m.cliente != null ? (m.cliente.nombre + ' ' + m.cliente.apellidos) : m.username}"
                                        th:selected="${medicoSeleccionadoId != null and medicoSeleccionadoId == m.id_usuario}">
                                </option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Acciones -->
                <div class="form-actions">
                    <a th:href="@{/listaClientes}" class="btn btn-secondary">
                        Cancelar
                    </a>
                    <button type="submit" class="btn btn-primary">
                        üíæ Guardar Cambios
                    </button>
                </div>
            </form>
        </div>
    </div>
</main>

<div th:replace="fragments/footer :: footer"></div>
</body>
</html>